<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>frofile</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"/>
<style>
#fileInput { display:none; }
.upload-btn { 
    width:50px; height:50px; 
    background:#fff; 
    border-radius:0px; 
    display:flex; 
    justify-content:center; 
    align-items:center; 
    cursor:pointer; 
    border:1px solid #999; 
    margin-bottom:10px; 
    font-size:30px; 
}
.box-container { 
    display:flex; 
    gap:10px; 
    margin-top:10px; 
}


.img-box { 
    position:relative; 
    width:80px; 
    height:80px; 
    border:1px solid #888; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    color:#777; 
    overflow:hidden; 
    font-size:12px; 
}
.img-box img { 
    width:100%; 
    height:100%; 
    object-fit:cover; 
}
.remove-btn { 
    position:absolute; 
    top:2px; 
    right:2px; 
    background:rgba(0,0,0,0.7); 
    color:white; 
    width:18px; 
    height:18px; 
    border-radius:50%; 
    font-size:12px; 
    line-height:18px; 
    text-align:center; 
    cursor:pointer; 
    display:none; 
    z-index: 2;
}
.img-box.has-img .remove-btn { 
    display:block; 
}

.product-card:hover {
    transform: scale(1.03);
}


.product-card { 
    border:1px solid rgb(219, 205, 205); 
    margin-top:15px; 
    width:205px; 
    cursor:pointer; 
   padding:5px;
    background: white;
    
}
.big-image { 
    width:100%; 
    height:200px; 
   object-fit: cover; 
    margin-bottom:10px; 
}
.small-images { 
    display:flex; 
    gap:8px; 
    margin-bottom:10px; 
    flex-wrap: wrap;
}
.small-images img { 
    width:50px; 
    height:50px; 
    border-radius:6px; 
    object-fit:cover; 
}
.btn-pa { 
    width:150px; 
    height:35px; 
    border-radius:5px; 
    margin-left:25%; 
    background-color: rgb(123,158,63); 
    color: white;
    border: none;
    cursor: pointer;
    font-weight: bold;
}
#pName, #pPrice { 
    width:95%; 
    height:30px; 
    border-radius:5px; 
    font-size:16px; 
    color:#000; 
    margin-bottom:5px; 
    padding: 5px;
    border: 1px solid #ccc;
}
.bigbox { 
    border:px solid rgb(205, 68, 68); 
    max-width:300px; 
    padding:20px; 
    margin: 20px auto;
    background: #f9f9f9;
}
h2 {
    margin-left: 20px;
}
a {
  text-decoration: none;
  color:black;
}
/* Product list */
#productList {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}

#userName{
    margin-left:20px;
   width:80%;
   height:30px;
   text-align: center;
   font-size:20px; border:none;
}
.btn-pa1{
    width:150px; 
    height:35px; 
    border-radius:5px; 
     
    background-color: rgb(123,158,63); 
    color: white;
    border: none;
    cursor: pointer;
   font-size:18px;
}
/* Phone Responsive */
@media (max-width: 480px) {

    .header {
        max-width: 100%;
        text-align: center;
    }
 .btn-pa1{
    margin: auto;
   
 }
   

    #userName {
        width: 90%;
       
    }

    .bigbox {
       
        max-width: 90%;
        margin: auto;
    }

    .product-card {
        width: 40%;
        padding: 5px;
    }

    .big-image {
        height: 120px;
    }

    .small-images img {
        width: 40px;
        height: 40px;
    }
}

/* Tablet Styles */
@media (min-width: 481px) and (max-width: 900px) {
    .product-card {
        width:30%;
    }
    .btn-pa1{
    margin: auto;
 }
 .header {
        max-width: 100%;
        text-align: center;
    }
 .btn-pa1{
    margin: auto;
 }
}

/* Large PC */
@media (min-width: 901px) {
    .product-card {
        width:180px;
    }
    .header {
        max-width: 100%;
        text-align: center;
    }
 .btn-pa1{
    margin: auto;
 }
 

}
.product-card{
    position: relative;
}
 .back{
    width:80px;height:30px;
    border:1px solid rgb(175, 229, 217);background-color:rgb(249, 245, 245);
}
</style>
</head>
<body>
    <a href="index.html"><button class="back">← Back</button></a><br><br>
<div class="header" style="margin: auto; max-width:300px; border:px solid red;">

<div class="profileone" style="position:relative;">
    <input type="file" id="profile" accept="image/*" style=" width:200px;height:200px;border-radius:50%;border:1px solid rgb(224, 226, 224); margin-left:15%; display:none;">
    
    <img id="profilePreview" src="" 
         style="width:200px;height:200px;border-radius:50%;border:1px solid #ccc;margin:auto;object-fit:cover;">
</div>

<div class="profiletwo" style="position:absolute;margin-left:170px;">
    <i class="fa-regular fa-camera" id="cameraIcon" style="font-size:25px;cursor:pointer;"></i>
</div>


<br><br>


<input type="text" id="userName" placeholder="Enter your name"><br><br>
<a href="https://wa.me/8801319992654">
    <button class="btn-pa1">Message</button>
</a>


   
</div>

<div class="bigbox">
    
    <input id="pName" type="text" placeholder="Product Name">
    <input id="pPrice" type="text" placeholder="Price (TK)"><br><br>

    <label for="fileInput" class="upload-btn"><i class="fa-solid fa-photo-film"></i></label>
    <input type="file" id="fileInput" accept="image/*" multiple>
    <span style="font-size: 12px; color: #666;">Click to upload images (max 4)</span>

    <div class="box-container">
        <div class="img-box" id="box1">Box 1 <span class="remove-btn">×</span></div>
        <div class="img-box" id="box2">Box 2 <span class="remove-btn">×</span></div>
        <div class="img-box" id="box3">Box 3 <span class="remove-btn">×</span></div>
        <div class="img-box" id="box4">Box 4 <span class="remove-btn">×</span></div>
    </div><br>

    <button class="btn-pa" onclick="addProduct()">Add Product</button>
</div>


<div id="productList"></div>

<script>
let products = JSON.parse(localStorage.getItem('products')) || [];
const fileInput = document.getElementById("fileInput");

/* ================= LOAD PRODUCTS ================= */
function loadProducts() {
    const productList = document.getElementById("productList");
    productList.innerHTML = '';

    products.forEach((product, index) => {
        productList.innerHTML += `
        <div class="product-card" style="position:relative;">

            <button onclick="deleteProduct(${index})" style="
                background:red;
                color:white;
                border:none;
                padding:5px 8px;
                position:absolute;
                top:5px;
                right:5px;
                cursor:pointer;
                border-radius:4px;
            ">Delete</button>

            <img class="big-image" src="${product.main}" onclick="openDetails(${index})">

            <div class="small-images">
                ${product.imgs.length > 0 
                  ? product.imgs.map(img => `<img src="${img}">`).join('')
                  : ''
                }
            </div>

            <h3>${product.name}</h3>
            <p>Price: ${product.price} TK</p>

        </div>
        `;
    });
}

/* ================= IMAGE UPLOAD ================= */
fileInput.addEventListener("change", function(){
    const files = this.files;

    for(let file of files){
        if(!file.type.startsWith('image/')) continue;

        let emptyBox = null;
        for(let i=1;i<=4;i++){
            let box = document.getElementById("box"+i);
            if(!box.classList.contains("has-img")){
                emptyBox = box;
                break;
            }
        }

        if(!emptyBox){
            alert("Maximum 4 images allowed!");
            break;
        }

        const reader = new FileReader();
        reader.onload = function(e){
            emptyBox.innerHTML = `<img src="${e.target.result}"><span class="remove-btn">×</span>`;
            emptyBox.classList.add("has-img");

            emptyBox.querySelector(".remove-btn").onclick = function(){
                emptyBox.innerHTML = "Box " + emptyBox.id.replace("box","");
                emptyBox.classList.remove("has-img");
            };
        };

        reader.readAsDataURL(file);
    }

    this.value = "";
});

/* ================= ADD PRODUCT ================= */
function addProduct(){
    let name = document.getElementById("pName").value.trim();
    let price = document.getElementById("pPrice").value.trim();

    if(!name || !price){
        alert("Please enter Name and Price!");
        return;
    }

    let images = [];
    for(let i=1;i<=4;i++){
        let box = document.getElementById("box"+i);
        if(box.classList.contains("has-img")){
            images.push(box.querySelector("img").src);
        }
    }

    if(images.length === 0){
        alert("Please add at least 1 image!");
        return;
    }

    let productData = {
        name,
        price,
        main: images[0],
        imgs: images.slice(1),
        description: "Best product description"
    };

    products.push(productData);
    localStorage.setItem('products', JSON.stringify(products));
    loadProducts();

    document.getElementById("pName").value = "";
    document.getElementById("pPrice").value = "";

    for(let i=1;i<=4;i++){
        let box = document.getElementById("box"+i);
        box.innerHTML = "Box " + i;
        box.classList.remove("has-img");
    }
}

/* ================= DELETE PRODUCT ================= */
function deleteProduct(index){
    if(confirm("Are you sure you want to delete this product?")){
        products.splice(index, 1);
        localStorage.setItem("products", JSON.stringify(products));
        loadProducts();
    }
}

/* ================= OPEN DETAILS ================= */
function openDetails(index){
    localStorage.setItem("selectedProductIndex", index);
    window.location.href = "product-details.html";
}

/* ================= PROFILE IMAGE + NAME ================= */
window.onload = function() {
    loadProducts();

    let savedImg = localStorage.getItem("userProfileImage");
    let savedName = localStorage.getItem("userName");

    if(savedImg){
        document.getElementById("profilePreview").src = savedImg;
    }
    if(savedName){
        document.getElementById("userName").value = savedName;
    }
};
/* Profile image select */        
document.getElementById("profilePreview").onclick = function(){
    document.getElementById("profile").click();
};
document.getElementById("cameraIcon").onclick = function(){
    document.getElementById("profile").click();
};

/* Save profile image */
document.getElementById("profile").addEventListener("change", function(){
    const file = this.files[0];
    if(!file) return;

    const reader = new FileReader();
    reader.onload = function(e){
        let imgURL = e.target.result;
        document.getElementById("profilePreview").src = imgURL;
        localStorage.setItem("userProfileImage", imgURL);
    };
    reader.readAsDataURL(file);
});

/* Save Name Live */
document.getElementById("userName").addEventListener("input", function(){
    localStorage.setItem("userName", this.value);
});
</script>



</body>
</html>



